<html>
    <head>
      <title>COVID Waffle plot - US States</title>
      <meta http-equiv = 'Content-Type' content = 'text/html; charset = utf-8'>

      <script type = 'text/javascript' src = 'https://d3js.org/d3.v3.min.js'></script>
      <script type = 'text/javascript' src = 'https://cdn.jsdelivr.net/gh/RhoInc/Webcharts/build/webcharts.min.js'></script>

      <script type = 'text/javascript' src = 'safetyWaffle.js'></script>

      <link type = 'text/css' rel = 'stylesheet' href = 'https://cdn.jsdelivr.net/gh/RhoInc/Webcharts/css/webcharts.min.css'>
      <link type = 'text/css' rel = 'stylesheet' href = 'index.css'>
    </head>

    <body>
      <div id = 'title'>COVID Waffle plot - US States</div>
      <div id= 'subtitle'>COVID outcomes over time for US states. Darker cells indicate larger values.</div>
      <div id="details">Chart uses most recent data from <a href="https://covidtracking.com/">the COVID tracking project.</a> Code for the visualization is available on <a href="https://github.com/RhoInc/safety-waffle">github</a>. Design inspired by static, country-level waffle plot in the <a href="https://www.nytimes.com/interactive/2020/world/coronavirus-maps.html">New York Times</a> and this <a href="https://focusgroupcausality.wordpress.com/2013/08/02/data-visualisation-part-ii-turning-longitudinal-data-from-spaghetti-to-something-more-easy-to-digest/">blog post</a>.</div>

      <div id = 'container'></div>

    </body>

    <script type = 'text/javascript'>
      let settings = {
          id_col: 'state',
          time_col: 'date',
          value_col: 'positive',
          filters: [] //updated in sync settings
        }
      const chart =safetyWaffle('#container', settings);
      d3.json('https://covidtracking.com/api/states/daily', function (data) {      
        chart.init(data);
      });
</script>
</html>
